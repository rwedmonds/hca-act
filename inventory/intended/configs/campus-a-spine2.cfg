!
no enable password
no aaa root
!
username admin privilege 15 role network-admin secret sha512 $6$RWWNi/U4IjK9U3Nv$/bMitcVhMFiqvUIJtAAeTOTSyvqAHK.XpJi12NI0.YTJlzbl9FiCGi2EDfIWo14Evi/sj5i1Rxspmkbso0Tun1
username ansible privilege 15 role network-admin secret sha512 $6$Dzu11L7yp9j3nCM9$FSptxMPyIL555OMO.ldnjDXgwZmrfMYwHSr0uznE5Qoqvd9a6UdjiFcJUhGLtvXVZR1r.A/iF5aAt50hf/EK4/
username cvpadmin privilege 15 role network-admin secret sha512 $6$6PorspAoWf2hUSNp$3CT1iPrvr7uhgCdAN2QBZuO7Aqu..EFjOK5SHUXSP44qJ91OQ/I.88B4iyDufM35wwqS1JhbmS3ejsDAxvOGL/
username robert privilege 15 role network-admin nopassword
username robert ssh-key ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIK7U+usFHr9Xhqph3HcmaWpi/Tjl0a3aof1AQRvSXuOw redmonds@redmonds
!
daemon TerminAttr
   exec /usr/bin/TerminAttr -cvaddr=192.168.0.5:9910 -cvauth=token,/tmp/cv-onboarding-token -cvvrf=default -disableaaa -smashexcludes=ale,flexCounter,hardware,kni,pulse,strata -taillogs
   no shutdown
!
vlan internal order ascending range 1006 1199
!
transceiver qsfp default-mode 4x10G
!
interface defaults
   ethernet
      shutdown
!
service routing protocols model multi-agent
!
hostname campus-a-spine2
ip name-server vrf default 169.254.169.254
!
snmp-server location HCA CAMPUS_A campus-a-spine2
!
spanning-tree mode none
!
clock timezone America/Chicago
!
vrf instance MGMT
!
banner login
* * * * * * * * * * W A R N I N G * * * * * * * * * *
This computer system is the property of me.
It is for authorized use only.
By using this system, all users acknowledge notice of,
and agree to comply with, the Acceptable Use Policy
(“AUP”).
Unauthorized or improper use of this system may result
in administrative disciplinary action.
By continuing to use this system you indicate your
awareness of and consent to these terms and
conditions of use.
* * * * * * * * * * W A R N I N G * * * * * * * * * *
EOF

!
banner motd
******************************************
*    __    __    ______     ___          *
*    |  |  |  |  /      |   /   \        *
*    |  |__|  | |  ,----'  /  ^  \       *
*    |   __   | |  |      /  /_\  \      *
*    |  |  |  | |  `----./  _____  \     *
*    |__|  |__|  \______/__/     \__\    *
*                                        *
******************************************
EOF

!
management api http-commands
   protocol https
   no shutdown
   !
   vrf MGMT
      no shutdown
!
radius-server host docker1.slacker.net vrf MGMT key 7 15331905173E2A1629373C3700
!
interface Ethernet5
   description P2P_campus-a-leaf1a_Ethernet2
   no shutdown
   mtu 1500
   no switchport
   ip address 172.31.254.50/31
!
interface Ethernet6
   description P2P_campus-a-leaf1b_Ethernet2
   no shutdown
   mtu 1500
   no switchport
   ip address 172.31.254.54/31
!
interface Management1
   no lldp transmit
   no lldp receive
!
interface Loopback0
   description ROUTER_ID
   no shutdown
   ip address 192.168.244.12/32
!
interface Management1
   description OOB_MANAGEMENT
   no shutdown
   vrf MGMT
   ip address 192.168.0.32/24
!
ip routing
no ip routing vrf MGMT
!
ip prefix-list PL-LOOPBACKS-EVPN-OVERLAY
   seq 10 permit 192.168.244.0/24 eq 32
!
ip route vrf MGMT 0.0.0.0/0 192.168.0.1
!
ip ssh client source-interface Loopback0
!
ntp local-interface Management1
ntp server 1.pool.ntp.org
!
ip radius vrf default source-interface Management1
!
route-map RM-CONN-2-BGP permit 10
   match ip address prefix-list PL-LOOPBACKS-EVPN-OVERLAY
!
router bfd
   multihop interval 1200 min-rx 1200 multiplier 3
!
router bgp 65101
   router-id 192.168.244.12
   no bgp default ipv4-unicast
   maximum-paths 4 ecmp 4
   neighbor EVPN-OVERLAY-PEERS peer group
   neighbor EVPN-OVERLAY-PEERS next-hop-unchanged
   neighbor EVPN-OVERLAY-PEERS update-source Loopback0
   neighbor EVPN-OVERLAY-PEERS bfd
   neighbor EVPN-OVERLAY-PEERS ebgp-multihop 3
   neighbor EVPN-OVERLAY-PEERS password 7 q+VNViP5i4rVjW1cxFv2wA==
   neighbor EVPN-OVERLAY-PEERS send-community
   neighbor EVPN-OVERLAY-PEERS maximum-routes 0
   neighbor IPv4-UNDERLAY-PEERS peer group
   neighbor IPv4-UNDERLAY-PEERS password 7 AQQvKeimxJu+uGQ/yYvv9w==
   neighbor IPv4-UNDERLAY-PEERS send-community
   neighbor IPv4-UNDERLAY-PEERS maximum-routes 12000
   neighbor 172.31.254.51 peer group IPv4-UNDERLAY-PEERS
   neighbor 172.31.254.51 remote-as 65102
   neighbor 172.31.254.51 description campus-a-leaf1a_Ethernet2
   neighbor 172.31.254.55 peer group IPv4-UNDERLAY-PEERS
   neighbor 172.31.254.55 remote-as 65102
   neighbor 172.31.254.55 description campus-a-leaf1b_Ethernet2
   neighbor 192.168.244.13 peer group EVPN-OVERLAY-PEERS
   neighbor 192.168.244.13 remote-as 65102
   neighbor 192.168.244.13 description campus-a-leaf1a_Loopback0
   neighbor 192.168.244.14 peer group EVPN-OVERLAY-PEERS
   neighbor 192.168.244.14 remote-as 65102
   neighbor 192.168.244.14 description campus-a-leaf1b_Loopback0
   redistribute connected route-map RM-CONN-2-BGP
   !
   address-family evpn
      neighbor EVPN-OVERLAY-PEERS activate
   !
   address-family ipv4
      no neighbor EVPN-OVERLAY-PEERS activate
      neighbor IPv4-UNDERLAY-PEERS activate
!
no schedule tech-support
!
end
